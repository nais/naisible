- name: Create logs group
  group:
    name: logs
    gid: 1065
    state: present

- name: Create fluent user
  user:
    name: fluent
    uid: 1065
    group: logs
    home: /
    createhome: no
    shell: /sbin/nologin
    state: present

- name: Ensure journal logdir exist
  file:
    state: directory
    path: "/var/log/journal"

- name: Install journal config
  copy:
    src: "{{ role_path }}/files/journald.conf"
    dest: "/etc/systemd/journald.conf"
  notify:
    - Restart journald
